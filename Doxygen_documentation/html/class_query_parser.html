<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Static-Code-Analyzer: QueryParser Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Static-Code-Analyzer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_query_parser-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">QueryParser Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A <a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a> class to validate and parse User Queries.  
 <a href="class_query_parser.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_query_parser_8h_source.html">QueryParser.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a12db252feb56df9af4bd5fb415cafb99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_query.html">Query</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_query_parser.html#a12db252feb56df9af4bd5fb415cafb99">queryParse</a> (string queryStr, bool &amp;valid)</td></tr>
<tr class="memdesc:a12db252feb56df9af4bd5fb415cafb99"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a> reads in the query string, tokenizes and detects the structure of the query, create and store the relationship clauses, create and return a <a class="el" href="class_query.html">Query</a> class structure.  <a href="#a12db252feb56df9af4bd5fb415cafb99">More...</a><br /></td></tr>
<tr class="separator:a12db252feb56df9af4bd5fb415cafb99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a> class to validate and parse User Queries. </p>
<p>Overview: Parser is responsible to :</p><ul>
<li>Read the query code</li>
<li>Tokenize the appropriate sentences</li>
<li>Build a <a class="el" href="class_query.html">Query</a> class structure to be used by <a class="el" href="class_query_evaluator.html" title="Query Evaluator class. ">QueryEvaluator</a></li>
</ul>
<p><a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a> has only one public method: </p><div class="fragment"><div class="line"><a class="code" href="class_query.html">Query</a> <a class="code" href="class_query_parser.html#a12db252feb56df9af4bd5fb415cafb99">QueryParser::queryParse</a>(<span class="keywordtype">string</span> queryStr, <span class="keywordtype">bool</span> &amp;valid);</div>
</div><!-- fragment --><p>It has many private functions and sub-functions to modularize the process of parsing and validating user queries.</p>
<p>When queryParser() is called, it will call </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> parseDesignEntity(<span class="keywordtype">string</span>);</div>
<div class="line"><span class="keywordtype">bool</span> parseSelectCl(<span class="keywordtype">string</span>);</div>
</div><!-- fragment --><p><a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a> will validate and parse the query against the pre-defined regular expressions which are stated in the grammar rules. (See sample of the pre-defined regex string further below)</p>
<p>Then <a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a> will call the function below to validate the tokens, while constructing the <a class="el" href="class_query.html">Query</a> class simultaneously </p><div class="fragment"><div class="line"><a class="code" href="class_query.html">Query</a> QueryParser::constructAndValidateQuery(vector&lt;string&gt; v, unordered_map&lt;string, TypeTable::SynType&gt; map, <span class="keywordtype">bool</span> &amp;valid){</div>
<div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt; (int) v.size(); i++){</div>
<div class="line">      <a class="code" href="class_relationship.html">Relationship</a> clauseRel = validateDefaultClauses(v,i,clauseValid);</div>
<div class="line">      <a class="code" href="class_relationship.html">Relationship</a> patternRel = validatePattern(v,i,patternValid);</div>
<div class="line">      <a class="code" href="class_relationship.html">Relationship</a> withRel = validateWith(v,i,withValid);</div>
<div class="line">      <span class="comment">//if the parsed tokens are not valid at all, terminate validation and return Query as invalid</span></div>
<div class="line">      <span class="keywordflow">if</span> ((clauseValid||paternValid||withValid) == <span class="keyword">false</span> ){</div>
<div class="line">         valid = <span class="keyword">false</span>;</div>
<div class="line">         <span class="keywordflow">return</span> <a class="code" href="class_query.html">Query</a>();</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line">}</div>
</div><!-- fragment --><p><a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a> will traverse all parsed tokens, and try to validate all the clauses (of 3 types).</p><ul>
<li>Default clauses : <a class="el" href="class_follows.html" title="A Follows class to store the Follows relationship. ">Follows</a>, <a class="el" href="class_modifies.html" title="A Modifies class to store the Modifies relationship. ">Modifies</a>, <a class="el" href="class_parent.html" title="A Parent class to store the Parent relationship. ">Parent</a>, <a class="el" href="class_calls.html" title="A Calls class to store the calls relationship. ">Calls</a>, etc..</li>
<li>Pattern clause</li>
<li>With clause</li>
</ul>
<p>For each type, the tokens will be evaluated and validated thoroughly, whether they conform to the grammar rule, and whether the synonym declaration has been defined properly. Otherwise, return failure, invalid query</p>
<p>To facilitate the regular expression matching in <a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a>, the grammar rules has been defined in <a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a> attributes in regular expression form.</p>
<p>Please take a look at the sample below: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::DIGIT = <span class="stringliteral">&quot;[0-9]&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::LETTER = <span class="stringliteral">&quot;[A-Za-z]&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::INTEGER = <span class="stringliteral">&quot;[0-9]+&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::IDENT = <span class="stringliteral">&quot;[A-Za-z][A-Za-z0-9#]*&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::synonym = IDENT;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::attrName = <span class="stringliteral">&quot;(?:procName|varName|value|stmt#)&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::entRef = synonym + <span class="stringliteral">&quot;|_|\&quot;&quot;</span> + IDENT +<span class="stringliteral">&quot;\&quot;|&quot;</span> + INTEGER;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::varRef = synonym + <span class="stringliteral">&quot;|_|\&quot;&quot;</span> + IDENT +<span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::stmtRef = synonym + <span class="stringliteral">&quot;|_|&quot;</span> + INTEGER;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::lineRef = synonym + <span class="stringliteral">&quot;|_|&quot;</span> + INTEGER;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::designEntity = <span class="stringliteral">&quot;procedure|stmtLst|stmt|assign|call|while|if|variable|constant|prog_line&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::attrRef = <span class="stringliteral">&quot;(?:&quot;</span> + synonym + <span class="stringliteral">&quot;.&quot;</span> + attrName + <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::elem = synonym + <span class="stringliteral">&quot;|&quot;</span> + attrRef;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::tuple = elem;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">string</span> QueryParser::resultCl = tuple + <span class="stringliteral">&quot;|&quot;</span> + BOOLEAN;</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_code_parser.html" title="A CodeParser class to validate and parse Source code. ">CodeParser</a>, <a class="el" href="class_query_evaluator.html" title="Query Evaluator class. ">QueryEvaluator</a> </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a12db252feb56df9af4bd5fb415cafb99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_query.html">Query</a> QueryParser::queryParse </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>queryStr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>valid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_query_parser.html" title="A QueryParser class to validate and parse User Queries. ">QueryParser</a> reads in the query string, tokenizes and detects the structure of the query, create and store the relationship clauses, create and return a <a class="el" href="class_query.html">Query</a> class structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queryStr</td><td>is the string which contains the query. (e.g. "assign a; while w; Select a such that Follows(w, a) pattern a ("x", _"x+y"_)") </td></tr>
    <tr><td class="paramname">valid</td><td>is a Boolean pointer to indicate whether the query string is valid or invalid </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a <a class="el" href="class_query.html">Query</a> object. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>D:/My Uni/Programming Projects/Static-Code-Analyzer/Team05/Code/QueryProcessor/<a class="el" href="_query_parser_8h_source.html">QueryParser.h</a></li>
<li>D:/My Uni/Programming Projects/Static-Code-Analyzer/Team05/Code/QueryProcessor/QueryParser.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 1 2014 01:45:49 for Static-Code-Analyzer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
